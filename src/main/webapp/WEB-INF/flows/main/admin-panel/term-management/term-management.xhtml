<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/layouts/standard.xhtml">

    <ui:define name="title">Term Management
    </ui:define>

    <ui:define name="notes">

    </ui:define>

    <ui:define name="content">
        <h:form id="form">

            <p:growl id="messages" showDetail="true" />

            <p:menubar>
                <p:menuitem value="Save" action="save" icon="ui-icon-disc" ajax="false"/>
                <p:menuitem value="Next" action="submitAndNext" icon="ui-icon-next" ajax="false"/>
                <p:menuitem value="Skip" action="skip" icon="ui-icon-refresh" ajax="false"/>
            </p:menubar>

            <p:spacer width="100%" height="10"/>

            <!-- Custom schedule component based on the Schedule component -->
            <p:enrollSchedule value="#{scheduleController.eventModel}" widgetVar="schedule"
                              allDaySlot="false"
                              showWeekends="true"
                              slotMinutes="15"
                              firstHour="7"
                              minTime="7"
                              maxTime="22"
                              initialDate="${scheduleController.initialDate}"
                              periodic="${scheduleController.periodic}"
                              leftHeaderTemplate="${scheduleController.leftHeaderTemplate}"
                              centerHeaderTemplate="${scheduleController.centerHeaderTemplate}"
                              rightHeaderTemplate="${scheduleController.rightHeaderTemplate}"
                              weekViewWidth="${scheduleController.weekViewWidth}"
                              view="${scheduleController.view}"
                              autoOpacity="true"
                    >

                <p:ajax event="eventSelect" listener="#{scheduleController.onEventSelect}"
                        update="eventDetails" oncomplete="eventDialog.show()" />

            </p:enrollSchedule>

            <p:dialog widgetVar="eventDialog" header="Term Details" showEffect="clip" hideEffect="clip" modal="true">
                <h:panelGrid id="eventDetails" columns="2">



                    <p:commandButton type="reset" value="Discard" />
                    <p:commandButton value="OK" actionListener="#{scheduleController.updateEvent}"
                                     oncomplete="schedule.update();eventDialog.hide();"/>
                </h:panelGrid>
            </p:dialog>
        </h:form>

    </ui:define>

</ui:composition>